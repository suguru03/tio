# ブランチ環境変数でGit Pullを効率化

**日付:** 2025-06-05
**カテゴリー:** 生産性

> 🇨🇦 [English version](./2025-06-05-git-pull-branch-env-optimization.md)

## 何を改善したか
複数のプロジェクトで`git pull --rebase`を実行する際に、異なるデフォルトブランチ名（dev、mainなど）を覚える必要がある認知負荷を環境変数を使用して解消しました。また、一貫したコマンド形式によりCtrl+Rのターミナル履歴検索で素早くコマンドを呼び出せるようになりました。

## どのように行ったか
- プロジェクトディレクトリに`.envrc`ファイルを設定してデフォルトブランチを定義
- `direnv`を使用してプロジェクトごとにブランチ設定を自動読み込み
- `git pull --rebase $BRANCH`を標準コマンドとして設定
- ローカル専用設定の場合は、ローカル`.envrc`を作成し`.git/info/exclude`に追加
- 必要に応じて`source_up`を使用して親ディレクトリの設定を継承

`.envrc`設定例：
```sh
source_up
export BRANCH=main
```

## 影響・効果
- 異なるデフォルトブランチを持つプロジェクト間での切り替え時の決断疲れが解消される
- 間違ったブランチをプルするエラーが防げる
- 全プロジェクトでgitワークフローが標準化される
- より重要な開発判断に精神的エネルギーを節約できる
- git操作で一貫した筋肉記憶が作られる
- Ctrl+Rのターミナル履歴検索で即座にコマンドアクセスが可能になる

## 学んだこと
- 環境変数は開発ワークフローのコンテキスト切り替え問題を解決できる
- 小さな認知負荷も日々の複数操作で蓄積される
- コマンドの標準化は精神的オーバーヘッドを減らしミスを防ぐ
- プロジェクト固有の設定は記憶するより自動化すべき
