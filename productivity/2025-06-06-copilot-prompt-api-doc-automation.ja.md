# Copilot PromptによるAPI Docの自動生成

**日付:** 2025-06-06
**カテゴリー:** 生産性

> 🇨🇦 [English version](./2025-06-06-copilot-prompt-api-doc-automation.md)

## 何を改善したか

2つのCopilot Promptスクリプトを組み合わせて、APIドキュメントの自動生成システムを作成しました。`commit.prompt.md`がgit diffでコントローラーの変更を検出すると、`api-doc.prompt.md`を自動的にトリガーしてAPI ドキュメントを更新します。これにより、ドキュメントが常にコードと同期を保つことが保証されます。

## どのように行ったか

1. **`commit.prompt.md`の作成**: コミット操作中にgit diffを分析し、コントローラーファイルの変更を検出する監視スクリプト
2. **`api-doc.prompt.md`の作成**: API ドキュメントの実際の生成・更新を担当する専用スクリプト
3. **連携システムの構築**: `commit.prompt.md`がコントローラーの変更を検出した際に`api-doc.prompt.md`を自動実行する仕組み
4. **ワークフローへの統合**: コミットプロセスに組み込むことで、コード変更と並行してドキュメント更新が seamlessly に実行される

この2段階システムにより、変更検出と文書生成の責任を分離し、メンテナンスしやすく拡張可能なソリューションを実現しました。

## 影響・効果

- **完全自動化の実現**: 手動でのAPIドキュメント更新作業が完全に不要になった
- **リアルタイム同期**: コード変更と同時にドキュメントが更新され、常に最新状態を維持
- **開発摩擦の排除**: 開発者はドキュメントの心配をせずにコーディングに集中できる
- **チーム生産性の向上**: 一貫性のある最新のAPIドキュメントにより、開発チーム全体の効率が向上
- **コードレビューの質向上**: API変更がドキュメントと一緒にレビューできるため、変更の影響が明確になる

## 学んだこと

- **モジュラー設計の重要性**: 機能を分離することで、各スクリプトが単一責任を持ち、保守しやすくなる
- **トリガーベース自動化**: 適切なトリガーポイント（コミット時）での自動化が最も効果的
- **プロンプトエンジニアリングの連携**: 複数のプロンプトを連携させることで、より複雑なワークフローを自動化できる
- **開発者体験の最適化**: 既存のワークフローに自然に統合される自動化が最も受け入れられやすい